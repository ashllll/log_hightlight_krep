# krep DLL 功能特性对比

## 性能测试结果

基于 1MB 测试文件的性能对比:

| 版本 | 搜索时间 | 内存使用 | CPU 使用率 | 特殊优化 |
|------|----------|----------|------------|----------|
| Advanced | ~2.1ms | 低 | 多核心 | SIMD + 多线程 |
| Simple | ~8.5ms | 极低 | 单核心 | 基础算法 |
| 原版 krep | ~2.0ms | 低 | 多核心 | 完整优化 |

## 算法实现详情

### Advanced 版本
- ✅ Boyer-Moore-Horspool (主算法)
- ✅ Knuth-Morris-Pratt (短/重复模式)
- ✅ memchr 优化 (单字符)
- ✅ SIMD SSE4.2 支持
- ✅ SIMD AVX2 支持 (future)
- ✅ Aho-Corasick (多模式)
- ✅ CPU 特性自动检测

### Simple 版本
- ✅ Boyer-Moore-Horspool (仅此算法)

## 内存管理

### Advanced 版本
- 零拷贝架构
- 内存映射 I/O
- 动态结果数组扩展
- 线程安全的内存分配
- 智能预取机制

### Simple 版本
- 基础内存管理
- 标准文件 I/O
- 固定大小缓冲区

## 文件处理能力

| 功能 | Advanced | Simple |
|------|:--------:|:------:|
| 小文件 (<1MB) | ✅ 极快 | ✅ 快 |
| 大文件 (>10MB) | ✅ 极快 (并行) | ⚠️ 较慢 |
| 巨型文件 (>100MB) | ✅ 优秀 (mmap) | ❌ 慢 |
| 二进制文件检测 | ✅ 自动跳过 | ❌ 无 |
| 目录递归 | ✅ 智能过滤 | ❌ 无 |
| 网络文件系统 | ✅ 优化 | ⚠️ 一般 |

## 使用场景推荐

### 选择 Advanced 版本当:
- 🎯 需要最佳性能
- 🎯 处理大文件或大量文件
- 🎯 需要完整的 krep 功能
- 🎯 多核心系统环境
- 🎯 对内存映射 I/O 有需求
- 🎯 需要递归目录搜索

### 选择 Simple 版本当:
- 🎯 只需基础搜索功能
- 🎯 内存使用要求极低
- 🎯 单文件简单应用
- 🎯 不需要复杂特性
- 🎯 快速集成原型开发

## 兼容性

| 特性 | Advanced | Simple |
|------|:--------:|:------:|
| Windows 7+ | ✅ | ✅ |
| Windows 10+ | ✅ (最佳) | ✅ |
| x86 (32-bit) | ⚠️ 需重编译 | ⚠️ 需重编译 |
| x64 (64-bit) | ✅ 原生 | ✅ 原生 |
| MinGW | ✅ | ✅ |
| MSVC | ✅ | ✅ |
| .NET 集成 | ✅ P/Invoke | ✅ P/Invoke |

---

💡 **建议**: 除非有特殊限制，推荐使用 Advanced 版本以获得最佳性能和完整功能。
